
<app-main-header></app-main-header>
<mat-spinner class="spinner" *ngIf="showFlagSpinner"></mat-spinner>

<div *ngIf="!showFlagSpinner">
  <div class="example-container mat-elevation-z8" *ngIf="products.length !==0">
    <table  [matSortDirection]="sortDirection"  [matSortActive]="sortColumn" 
    mat-table matSort (matSortChange)="sortChange($event)" [dataSource]="dataSource" tabindex="0">
    
    <!-- Title Column-->
    <ng-container matColumnDef="title">
      <th mat-header-cell mat-sort-header *matHeaderCellDef class="text-row"> Product Name </th>
      <td #td mat-cell *matCellDef="let item of dataSource" class="w-25 word-break"> {{item.title}} </td>
    </ng-container>


    <!-- Image Column -->
    <ng-container matColumnDef="productImage">
      <th mat-header-cell *matHeaderCellDef  class="text-row"> Product Image </th>
      <td mat-cell *matCellDef="let item of products" class="w-25 word-break"><img style="width: 120px; height: 100px;" src="{{item.path}}" alt="Image"></td>
    </ng-container>

    <!-- Description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell  mat-sort-header *matHeaderCellDef  class="text-row"> Description </th>
      <td mat-cell *matCellDef="let item of products" class="w-25 word-break"> {{item.description}} </td>
    </ng-container>

    <!-- Price Column -->
     <ng-container matColumnDef="price">
       <th mat-header-cell mat-sort-header *matHeaderCellDef  class="text-row"> Price </th>
       <td mat-cell *matCellDef="let item of products" class="w-25 "> {{item.price}} </td>
     </ng-container>

      <!-- Quantity -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell mat-sort-header  class="text-row" *matHeaderCellDef [ngClass]="'customWidthClass'">Quantity</th>
        <td mat-cell *matCellDef="let item of products" [ngClass]="'customWidthClass'"> {{item.quantity}} </td>
      </ng-container>


      <!-- Total-->
      <ng-container matColumnDef="total">
        <th mat-header-cell mat-sort-header *matHeaderCellDef  class="text-row">Total</th>
        <td mat-cell *matCellDef="let item of products" class="w-25"> {{item.total}} </td>
     </ng-container>
      
      <!-- Remove Column -->
      <ng-container matColumnDef="remove">
        <th mat-header-cell *matHeaderCellDef  class="text-row"> Action </th>
        <td mat-cell *matCellDef="let item of products; let i = index" class="w-25">
          <button class="btn btn-danger" (click)="removeItem(item, i)"><i class="fa fa-trash" aria-hidden="true"></i></button>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  
  <div class="content">
    <span class="content-text">
      <span class="content-text-main"></span>
      <span class="confirm-btn">
        <mat-chip class="btn btn-primary check" (click)="onEditDetail()" selected>Proceed to Payment</mat-chip>
      </span>
    </span>
  </div>
</div>
</div>




<!-- 
<ng-container *ngIf="products.length !==0">
  <div class="container" *ngIf="!showFlagSpinner">
    <div class="card-table">
      <div class="cart-product">
        <table class="table table-responsive" style="padding:20px;">
          <thead>
            <tr>
              <th>Sr.No</th>
              <th>Product Name</th>
              <th>Product Image</th>
              <th>Description</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Total</th>
              <th>Action</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let item of products; let i=index" tabindex="0">

              <td>{{i+1}}</td>
              <td>{{item.title}}</td>
              <td><img style="width: 120px;" src="{{item.path}}" alt=""></td>
              <td>{{item.description}}</td>
              <td>{{item.price}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.total}}</td>
              <td>
              <button class="btn btn-danger" (click)="removeItem(item, i)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </td>
            </tr>
          </tbody>

        </table>
        <div class="content">
          <span class="content-text">
            <span class="content-text-main"></span>
            <span class="confirm-btn">
              <mat-chip class="btn btn-primary check" (click)="onEditDetail()" selected>Proceed to Payment</mat-chip>
            </span>
          </span>
        </div>
      </div>
    </div>
  </div>
</ng-container> -->

<!-- <ng-container *ngIf="products.length !==0">
<div class="content">
<span class="content-text">{{'Total Amount:'}}
  <span class="content-text-main">
   {{totalSum | currency: 'Rs '}}
  </span>
  <span class="confirm-btn">
    <mat-chip class="btn btn-primary check" (click)="onEditDetail()" selected>Proceed to Payment</mat-chip>
  </span>
</span>
</div>
</ng-container> -->



<ng-container *ngIf="products.length === 0">
  <div class="container" *ngIf="!showFlagSpinner">
  <div class="card"></div>

  <div class="center">
    <img src="https://rukminim1.flixcart.com/www/800/800/promos/16/05/2019/d438a32e-765a-4d8b-b4a6-520b560971e8.png?q=90"
    alt="">
    <h4> Your cart is empty!</h4>
    <h5>Add item to it now</h5>
    <button routerLinkActive="active" (click)="onMainPage()" class="btn btn-primary">Shop now</button>
  </div>
</div>
</ng-container>
